"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4e3],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(t),g=r,h=d["".concat(l,".").concat(g)]||d[g]||p[g]||a;return t?o.createElement(h,i(i({ref:n},u),{},{components:t})):o.createElement(h,i({ref:n},u))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(7294),r=t(6010);const a="tabItem_Ymn6";function i(e){let{children:n,hidden:t,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a,i),hidden:t},n)}},5488:(e,n,t)=>{t.d(n,{Z:()=>g});var o=t(7462),r=t(7294),a=t(6010),i=t(2389),s=t(7392),l=t(7094),c=t(2466);const u="tabList__CuJ",p="tabItem_LNqP";function d(e){var n,t;const{lazy:i,block:d,defaultValue:g,values:h,groupId:m,className:f}=e,b=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=h?h:b.map((e=>{let{props:{value:n,label:t,attributes:o}}=e;return{value:n,label:t,attributes:o}})),y=(0,s.l)(v,((e,n)=>e.value===n.value));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const k=null===g?g:null!=(n=null!=g?g:null==(t=b.find((e=>e.props.default)))?void 0:t.props.value)?n:b[0].props.value;if(null!==k&&!v.some((e=>e.value===k)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+v.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:w,setTabGroupChoices:C}=(0,l.U)(),[N,I]=(0,r.useState)(k),T=[],{blockElementScrollPositionUntilNextRender:O}=(0,c.o5)();if(null!=m){const e=w[m];null!=e&&e!==N&&v.some((n=>n.value===e))&&I(e)}const E=e=>{const n=e.currentTarget,t=T.indexOf(n),o=v[t].value;o!==N&&(O(n),I(o),null!=m&&C(m,String(o)))},j=e=>{var n;let t=null;switch(e.key){case"ArrowRight":{var o;const n=T.indexOf(e.currentTarget)+1;t=null!=(o=T[n])?o:T[0];break}case"ArrowLeft":{var r;const n=T.indexOf(e.currentTarget)-1;t=null!=(r=T[n])?r:T[T.length-1];break}}null==(n=t)||n.focus()};return r.createElement("div",{className:(0,a.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":d},f)},v.map((e=>{let{value:n,label:t,attributes:i}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:N===n?0:-1,"aria-selected":N===n,key:n,ref:e=>T.push(e),onKeyDown:j,onFocus:E,onClick:E},i,{className:(0,a.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":N===n})}),null!=t?t:n)}))),i?(0,r.cloneElement)(b.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},b.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==N})))))}function g(e){const n=(0,i.Z)();return r.createElement(d,(0,o.Z)({key:String(n)},e))}},4543:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>c,toc:()=>p});var o=t(7462),r=(t(7294),t(3905)),a=t(5488),i=t(5162);const s={sidebar_label:"Working with user Connections",sidebar_position:4},l="Working with user Connections",c={unversionedId:"guides/user-connections",id:"guides/user-connections",title:"Working with user Connections",description:"Next to Integrations and Actions, (user) Connections are the third major element in the Nango Architecture.",source:"@site/docs/guides/user-connections.md",sourceDirName:"guides",slug:"/guides/user-connections",permalink:"/guides/user-connections",draft:!1,editUrl:"https://github.com/nangohq/nango/tree/main/docs/docs/guides/user-connections.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_label:"Working with user Connections",sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Trigger an Action",permalink:"/guides/trigger-an-action"},next:{title:"Auth",permalink:"/guides/auth"}},u={},p=[{value:"How to register a new Connection",id:"how-to-register-a-new-connection",level:2},{value:"Getting all Connections for a specific user Id",id:"getting-all-connections-for-a-specific-user-id",level:2},{value:"Getting all Connections of a specific Integration",id:"getting-all-connections-of-a-specific-integration",level:2}],d={toc:p};function g(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"working-with-user-connections"},"Working with user Connections"),(0,r.kt)("p",null,"Next to Integrations and Actions, (user) Connections are the third major element in the Nango ",(0,r.kt)("a",{parentName:"p",href:"/architecture"},"Architecture"),"."),(0,r.kt)("p",null,"A Connection in Nango links together two things: An Integration and a user-id. When a user sets an Integration up we call this a Connection in Nango. The Connection stores all the relevant details about this user's specific setup of the Integration and you will interact with this object quite frequently when using Nango."),(0,r.kt)("p",null,"This guide gives you an overview of the most common patterns when working with Connections and how to implement them in your application."),(0,r.kt)("h2",{id:"how-to-register-a-new-connection"},"How to register a new Connection"),(0,r.kt)("p",null,"Now that you have built Integrations with Actions you want your users to be able to set them up in your application. There are two ways in which you can do this:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You ",(0,r.kt)("a",{parentName:"li",href:"/guides/auth#frontendOauth"},"trigger an OAuth flow in your frontend")," when the user wants to setup an Integration which supports OAuth ",(0,r.kt)("em",{parentName:"li"},"(recommended for OAuth based integrations)")),(0,r.kt)("li",{parentName:"ol"},"You register a new Connection from your backend by ",(0,r.kt)("a",{parentName:"li",href:"/reference/SDKs/node#registerConnection"},"calling ",(0,r.kt)("inlineCode",{parentName:"a"},"registerConnection"))," in the client SDK ",(0,r.kt)("em",{parentName:"li"},"(necessary for APIs which do not support OAuth)"))),(0,r.kt)("p",null,"Both cases will result in a Connection being registered in the Nango server. Once a Connection has been registered for a user you can start triggering actions for their user id as shown in ",(0,r.kt)("a",{parentName:"p",href:"/guides/trigger-an-action"},"Trigger an action"),"."),(0,r.kt)("p",null,"Because Nango keeps track of all registered Connections for all Integrations and all Users it is also the perfect place to query for the Integrations a user has setup, get all users which have setup a specific Integration and similar queries."),(0,r.kt)("h2",{id:"getting-all-connections-for-a-specific-user-id"},"Getting all Connections for a specific user Id"),(0,r.kt)("p",null,"To get all Integrations which a user has setup you can query for all Connections of a user's id:"),(0,r.kt)(a.Z,{groupId:"programming-language",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"node",label:"Node",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const userId = '1';\nconst userConnections = await nango.getConnectionsForUserId(userId);\n\nconsole.log(`The user with id \"${userId}\" has these active connections:`, userConnections);\n")),(0,r.kt)("p",null,"For a detailed documentation of the returned connections object check the ",(0,r.kt)("a",{parentName:"p",href:"/reference/SDKs/node#getConnectionsForUserId"},"SDK reference for ",(0,r.kt)("inlineCode",{parentName:"a"},"getConnectionsForUserId")),".")),(0,r.kt)(i.Z,{value:"other",label:"Other Languages",mdxType:"TabItem"},"Coming soon!")),(0,r.kt)("p",null,"You might want to make Nango's response of this available as an endpoint in your own backend so the frontend can always query which Integrations the currently logged in user has set up."),(0,r.kt)("h2",{id:"getting-all-connections-of-a-specific-integration"},"Getting all Connections of a specific Integration"),(0,r.kt)("p",null,"To get all the users which have setup a specific Integration you can query for all Connections of an integration:"),(0,r.kt)(a.Z,{groupId:"programming-language",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"node",label:"Node",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const integration = 'slack';\nconst integrationConnections = await nango.getConnectionsForIntegration(integration);\n\nconsole.log(`The integration \"${integration}\" has these active connections:`, integrationConnections);\n")),(0,r.kt)("p",null,"For a detailed documentation of the returned connections object check the ",(0,r.kt)("a",{parentName:"p",href:"/reference/SDKs/node#getConnectionsForIntegration"},"SDK reference for ",(0,r.kt)("inlineCode",{parentName:"a"},"getConnectionsForIntegration")),".")),(0,r.kt)(i.Z,{value:"other",label:"Other Languages",mdxType:"TabItem"},"Coming soon!")),(0,r.kt)("p",null,"This method is especially helpful for Admin panels or background tasks, where you are e.g. checking periodically to whom you should send a Slack notification."))}g.isMDXComponent=!0}}]);