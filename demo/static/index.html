<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>Nango online demo</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
            crossorigin="anonymous"
        />
        <link rel="icon" href="favicon.png" />

        <style>
            /* show/hide field values */
            .hideContent {
                overflow: hidden;
                line-height: 1em;
                height: 4em;
            }

            .showContent {
                line-height: 1em;
                height: auto;
            }
            .showContent {
                height: auto;
            }

            .show-more {
                padding: 10px 0;
                text-align: center;
            }

            /* Code editor helpers */
            .language {
                height: 25px;
                margin-left: 10px;
            }

            .code-wrapper {
                position: relative;
                height: 250px;
            }

            .codeflask.codeflask--has-line-numbers:before,
            .codeflask .codeflask__lines {
                background: #fff !important;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="row align-items-center" style="margin-top: 50px">
                <div class="col-8">
                    <h1>Nango live demo</h1>
                </div>
                <div class="col h3" style="text-align: right">
                    <a href="https://docs.nango.dev/">Docs</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="https://github.com/NangoHQ/nango">GitHub Repo</a>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="lead">
                        This is a live demo of <a href="https://github.com/NangoHQ/nango">Nango</a>, an easy way to sync data from external APIs to your DB
                    </p>
                </div>
            </div>

            <div class="row" style="margin-top: 20px">
                <div class="col">
                    <!-- prettier-ignore -->
                    <h2>1. Add a new Sync</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="language-selector d-flex justify-content-start">
                        <p>SDK:</p>
                        <select class="language">
                            <option value="javascript" selected>Node.js</option>
                            <option value="rest" disabled>REST API - see docs</option>
                            <option value="coming-sonn" disabled>More coming soon!</option>
                        </select>
                    </div>
                    <!-- prettier-ignore -->
                    <div class="code-wrapper" id="config">import { Nango } from '@nangohq/node-client'

// This is a live editor - edit me!
let config = {
    response_path: 'data.children',
    paging_cursor_object_response_path: 'data.name',
    paging_cursor_request_path: 'after',
    max_total: 100
};

Nango.sync('https://www.reddit.com/r/redditdev/new.json', config);</div>
                </div>
                <div class="col d-flex align-items-center">
                    <div class="text-center">
                        <p>
                            ðŸ‘ˆ This default example syncs the 100 latest posts from
                            <a href="https://reddit.com/r/redditdev/new" target="_blank">/r/redditdev</a>
                        </p>
                        <p>For all configuration params <a href="https://docs.nango.dev/add-sync#sync-options" target="_blank">check the docs</a>.</p>
                        <p>Questions? Join our <a href="https://nango.dev/slack" target="_blank">Slack Community</a>!</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="runCode();">Run!</button>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div id="syncid" class="alert alert-secondary" style="margin-top: 30px; visibility: hidden"></div>
                    <div id="status" class="alert alert-primary" style="visibility: hidden"></div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <h2>2. Inspect the synced data</h2>
                    <p></p>
                </div>
            </div>

            <div class="row">
                <div class="col table-responsive">
                    <h4>Nango Syncs</h4>
                    <table id="syncs" class="table">
                        <thead style="font-family: monospace">
                            <th>id</th>
                            <th>url</th>
                            <th>created_at</th>
                            <th>updated_at</th>
                        </thead>
                        <tbody id="syncs-body">
                            <tr>
                                <td colspan="4">No Syncs yet, add one by running the example above ðŸ‘†</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-8">
                    <h4>Synced data (raw)</h4>
                    <table id="data" class="table">
                        <thead style="font-family: monospace">
                            <th>id</th>
                            <th>sync_id</th>
                            <th>emitted_at</th>
                            <th style="max-width: 300px; word-wrap: break-word">data</th>
                        </thead>
                        <tbody id="data-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"
        ></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
        <script src="https://unpkg.com/codeflask/build/codeflask.min.js"></script>
        <script type="module" src="demo.js"></script>
    </body>
</html>
