<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>Nango online demo</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
            crossorigin="anonymous"
        />
        <link rel="icon" href="favicon.png" />

        <style type="">
            .hideContent {
                overflow: hidden;
                line-height: 1em;
                height: 4em;
            }

            .showContent {
                line-height: 1em;
                height: auto;
            }
            .showContent {
                height: auto;
            }

            .show-more {
                padding: 10px 0;
                text-align: center;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="row align-items-center" style="margin-top: 50px">
                <div class="col-8">
                    <h1>Nango demo</h1>
                </div>
                <div class="col h3" style="text-align: right">
                    <a href="https://docs.nango.dev/">Docs</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="https://github.com/NangoHQ/nango">GitHub Repo</a>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="lead">
                        This is a live demo of <a href="https://github.com/NangoHQ/nango">Nango</a>, an easy way to sync data from external APIs to your DB
                    </p>
                </div>
            </div>

            <div class="row" style="margin-top: 20px">
                <div class="col">
                    <h2>1. Add a new sync with a few lines of code</h2>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <textarea class="form-control" id="config" style="min-width: 35em; min-height: 17em">
import { Nango } from '@nangohq/node-client'

let config = {
    response_path: 'data.children',
    paging_cursor_object_response_path: 'data.name',
    paging_cursor_request_path: 'after',
    max_total: 100
};

Nango.sync('https://www.reddit.com/r/redditdev/new.json', config);</textarea
                    >
                </div>
                <div class="col">
                    <h4>How Nango works</h4>
                    <p>You can think of Nango as periodically running an HTTP request for you and storing the updated results in a database.</p>
                    <p>With the <span style="font-family: monospace">config</span> you tell Nango how to run these HTTP requests for you, as well as:</p>
                    <ul>
                        <li>Headers & query params we should pass along</li>
                        <li>How pagination works for the API endpoint</li>
                        <li>How to uniquely identify objects (so we can upsert/dedupe them for you)</li>
                        <li>more, optional, options to tune Nango to your liking</li>
                    </ul>
                    <p>
                        Find all the options
                        <a href="https://docs.nango.dev/add-sync#nangosync-options">in our docs for <span style="font-family: monospace">Nango.sync()</span></a>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="alert alert-secondary">
                        â„¹ This example here uses our <a href="https://www.npmjs.com/package/@nangohq/node-client">node SDK</a>, but Nango is language agnostic:
                        It offers SDKs for different languages as well as a REST API
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="runCode();">Run!</button>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div id="syncid" class="alert alert-secondary" style="margin-top: 30px; visibility: hidden"></div>
                    <div id="status" class="alert alert-primary" style="visibility: hidden"></div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <h2>2. Inspect the syncs & synced data</h2>
                    <p></p>
                </div>
            </div>

            <div class="row">
                <div class="col table-responsive">
                    <h4>Nango Syncs</h4>
                    <table id="syncs" class="table">
                        <thead style="font-family: monospace">
                            <th>id</th>
                            <th>url</th>
                            <th>created_at</th>
                            <th>updated_at</th>
                        </thead>
                        <tbody id="syncs-body">
                            <tr>
                                <td colspan="4">No Syncs yet, add one by running the example above ðŸ‘†</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-8">
                    <h4>Synced data (raw)</h4>
                    <table id="data" class="table">
                        <thead style="font-family: monospace">
                            <th>id</th>
                            <th>sync_id</th>
                            <th>emitted_at</th>
                            <th style="max-width: 300px; word-wrap: break-word">data</th>
                        </thead>
                        <tbody id="data-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"
        ></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
        <script type="application/javascript" src="demo.js"></script>
    </body>
</html>
